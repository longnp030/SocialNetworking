(function(e){function t(t){for(var n,s,i=t[0],c=t[1],u=t[2],m=0,d=[];m<i.length;m++)s=i[m],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={app:0},a=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"2f56":function(e,t,r){"use strict";r("6ef4")},"33c4":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],s=(r("b0c0"),{name:"app",created:function(){null===this.$route.name&&this.$router.push({name:"home"})}}),i=s,c=(r("034f"),r("2877")),u=Object(c["a"])(i,o,a,!1,null,null,null),l=u.exports,m=(r("d3b7"),r("bad4")),d=r("33e1"),h={install:function(){var e=(new m["a"]).withUrl("https://localhost:6868/postsocket").configureLogging(d["a"].Information).build(),t=new n["default"];n["default"].prototype.$postHub=t,e.on("Reaction",(function(e,r,n){t.$emit("post-react",{postId:e,userId:r,like:n})})),e.on("Comment",(function(e){t.$emit("post-commented-on",e)})),t.postOpened=function(t){return r.then((function(){return e.invoke("ViewingPost",t)})).catch(console.error)},t.postClosed=function(t){return r.then((function(){return e.invoke("LeavingPost",t)})).catch(console.error)};var r=null;function o(){return r=e.start().catch((function(e){return console.error("Failed to connect with hub",e),new Promise((function(e,t){return setTimeout((function(){return o().then(e).catch(t)}),5e3)}))})),r}e.onclose((function(){return o()})),o()}},f={install:function(){var e=(new m["a"]).withUrl("https://localhost:6868/commentsocket").configureLogging(d["a"].Information).build(),t=new n["default"];n["default"].prototype.$commentHub=t,e.on("Reaction",(function(e,r,n){t.$emit("comment-react",{commentId:e,userId:r,like:n})})),e.on("Comment",(function(e){t.$emit("comment-commented-on",e)})),t.commentOpened=function(t){return r.then((function(){return e.invoke("ViewingComment",t)})).catch(console.error)},t.commentClosed=function(t){return r.then((function(){return e.invoke("LeavingComment",t)})).catch(console.error)};var r=null;function o(){return r=e.start().catch((function(e){return console.error("Failed to connect with hub",e),new Promise((function(e,t){return setTimeout((function(){return o().then(e).catch(t)}),5e3)}))})),r}e.onclose((function(){return o()})),o()}},p=r("8c4f"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Login")]),e.show?r("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Email address:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"email",placeholder:"Enter email",required:""},model:{value:e.form.Email,callback:function(t){e.$set(e.form,"Email",t)},expression:"form.Email"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Password:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",type:"password",placeholder:"Enter password",required:""},model:{value:e.form.Password,callback:function(t){e.$set(e.form,"Password",t)},expression:"form.Password"}})],1),r("b-form-group",{attrs:{id:"input-group-4"}},[r("b-form-checkbox",{model:{value:e.saveCred,callback:function(t){e.saveCred=t},expression:"saveCred"}},[e._v("Remember me")])],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")]),r("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1):e._e(),r("b-button",{attrs:{variant:"warning"},on:{click:e.onRegister}},[e._v("Register")])],1)},b=[],k=(r("e9c4"),r("bc3a")),v=r.n(k),w={data:function(){return{authUrl:"https://localhost:6868/Users/authenticate",form:{},saveCred:!1,show:!0}},methods:{saveCookie:function(e,t,r){this.$cookies.set("sn-auth-token",e,r),this.$cookies.set("sn-user-id",t,r)},onSubmit:function(e){var t=this;e.preventDefault(),v.a.post(this.authUrl,JSON.parse(JSON.stringify(this.form))).then((function(e){var r=e.data.JwtToken,n=e.data.Id;t.saveCred?t.saveCookie(r,n,-1):t.saveCookie(r,n,0),t.$nextTick((function(){this.$router.push({name:"home",params:{authToken:r,userId:n}})}))})).catch((function(e){console.log(e)}))},onReset:function(e){var t=this;e.preventDefault(),this.form={},this.show=!1,this.$nextTick((function(){t.show=!0}))},onRegister:function(){this.$router.push({name:"register"})}}},I=w,x=Object(c["a"])(I,g,b,!1,null,"5a98a737",null),j=x.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Register")]),e.show?r("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Email address:","label-for":"input-1",description:"We'll never share your email with anyone else."}},[r("b-form-input",{attrs:{id:"input-1",type:"email",placeholder:"Enter email",required:""},model:{value:e.form.Email,callback:function(t){e.$set(e.form,"Email",t)},expression:"form.Email"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Password:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",placeholder:"Enter password",required:""},model:{value:e.form.Password,callback:function(t){e.$set(e.form,"Password",t)},expression:"form.Password"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")]),r("b-button",{attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1):e._e(),r("b-card",{staticClass:"mt-3",attrs:{header:"Form Data Result"}},[r("pre",{staticClass:"m-0"},[e._v(e._s(e.form))])])],1)},T=[],R={name:"Register",data:function(){return{registerUrl:"https://localhost:6868/Users/register",form:{},show:!0}},methods:{onSubmit:function(e){var t=this;e.preventDefault(),v.a.post(this.registerUrl,JSON.parse(JSON.stringify(this.form))).then((function(e){console.log(e),t.$router.push({name:"login"})})).catch((function(e){console.log(e.response)}))},onReset:function(e){var t=this;e.preventDefault(),this.form={},this.show=!1,this.$nextTick((function(){t.show=!0}))}}},P=R,_=Object(c["a"])(P,C,T,!1,null,"bed6f78e",null),U=_.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-row",{attrs:{cols:"3"}},[r("b-col",{attrs:{cols:"3"}},[e._v("Column")]),r("b-col",{attrs:{cols:"6"}},[e.userId?r("Feed",{attrs:{userId:e.userId,jwtToken:e.jwtToken}}):e._e()],1),r("b-col",{attrs:{cols:"3"}},[e._v("Column")])],1)],1)},$=[],y=r("1da1"),S=(r("ac1f"),r("5319"),r("96cf"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("PostForm",{attrs:{userId:e.userId,jwtToken:e.jwtToken}}),e._l(e.postIds,(function(t){return r("PostCard",{key:t,attrs:{userId:e.userId,jwtToken:e.jwtToken,postId:t}})}))],2)}),L=[],M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",[r("b-media",{scopedSlots:e._u([{key:"aside",fn:function(){return[r("b-img",{attrs:{blank:"","blank-color":"#ccc",width:"64",alt:"placeholder"}})]},proxy:!0}])},[r("b-form",{on:{submit:e.onSubmit}},[r("b-form-group",[r("b-form-select",{staticClass:"mt-3",attrs:{options:e.privacyOptions,size:"sm"},model:{value:e.form.Privacy,callback:function(t){e.$set(e.form,"Privacy",t)},expression:"form.Privacy"}})],1),r("b-form-group",[r("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:e.form.Text,callback:function(t){e.$set(e.form,"Text",t)},expression:"form.Text"}})],1),r("b-form-group",[r("b-form-file",{attrs:{placeholder:"Add an image..."},model:{value:e.media,callback:function(t){e.media=t},expression:"media"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)],1)},A=[],D={name:"PostForm",props:["userId","jwtToken"],data:function(){return{postUrl:"https://localhost:6868/Posts/",form:{MediaPaths:[]},media:null,privacyOptions:[{value:0,text:"Public"},{value:1,text:"Private"}]}},methods:{onSubmit:function(e){e.preventDefault(),this.form.AuthorId=this.userId,v.a.post(this.postUrl,JSON.parse(JSON.stringify(this.form)),{headers:{Authorization:"Bearer ".concat(this.jwtToken)}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},watch:{media:function(){var e=this;null!==this.media&&(console.log(this.media),this.form.MediaPaths.push(this.media),this.$nextTick((function(){e.media=null})))}}},E=D,F=Object(c["a"])(E,M,A,!1,null,"abf6a434",null),B=F.exports,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.author?r("b-card",{on:{click:e.postCardOnClick}},[r("b-media",{scopedSlots:e._u([{key:"aside",fn:function(){return[r("b-img",{attrs:{blank:"","blank-color":"#ccc",width:"64",alt:"placeholder"}})]},proxy:!0}],null,!1,3721305002)},[r("div",{staticClass:"d-inline-flex author-date"},[r("b",{staticClass:"mt-0 author"},[r("a",{attrs:{href:e.userProfileUrl},on:{click:function(t){e.$(this).stopPropagation()}}},[e._v(e._s(e.author.Name))])]),r("div",[e._v("・")]),r("div",{staticClass:"date",attrs:{title:e.toReadableTime(e.post.Timestamp)}},[e._v(e._s(e.calcTimeTillNow(e.post.Timestamp)))])]),r("p",{staticClass:"mb-0 text"},[e._v(" "+e._s(e.post.Text)+" ")])]),r("b-button-group",{staticClass:"d-flex like-cmt-share"},[r("div",{staticClass:"share"},[r("b-button",{attrs:{variant:"outline"}},[r("b-icon",{attrs:{icon:"share"}})],1),r("div",{staticClass:"count"},[e._v(e._s(e.shares))])],1),r("div",{staticClass:"cmt"},[r("b-button",{attrs:{variant:"outline"}},[r("b-icon",{attrs:{icon:"chat"}})],1),r("div",{staticClass:"count"},[e._v(e._s(e.comments))])],1),r("div",{staticClass:"like"},[e.iLiked?r("b-button",{attrs:{variant:"outline"},on:{click:e.unlikePost}},[r("b-icon",{attrs:{icon:"heart-fill",variant:"danger"}})],1):r("b-button",{attrs:{variant:"outline"},on:{click:e.likePost}},[r("b-icon",{attrs:{icon:"heart"}})],1),r("div",{staticClass:"count",class:{liked:e.iLiked}},[e._v(e._s(e.likes))])],1)])],1):e._e()},N=[],H={name:"PostCard",props:["postId","userId","jwtToken"],data:function(){return{getPostUrl:"https://localhost:6868/Posts/postId",getUserProfileUrl:"https://localhost:6868/Users/userId/profile",userProfileUrl:"http://localhost:8080/user/".concat(this.userId,"/profile"),post:{},author:null,getLikesUrl:"https://localhost:6868/Posts/postId/likes",checkLikedUrl:"https://localhost:6868/Posts/postId/likes/userId",likePostUrl:"https://localhost:6868/Posts/postId/likes/userId/like",unlikePostUrl:"https://localhost:6868/Posts/postId/likes/userId/unlike",iLiked:!1,whoLiked:[],likes:0,getCommentCountUrl:"https://localhost:6868/Posts/postId/comments/count",comments:0,shares:0}},created:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$postHub.$on("post-react",e.postReacted);case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPost();case 2:return t.next=4,e.getAuthorProfile();case 4:return t.next=6,e.haveILiked();case 6:return t.next=8,e.getWhoLiked();case 8:return t.next=10,e.getCommentCount();case 10:case"end":return t.stop()}}),t)})))()},methods:{getPost:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(e.getPostUrl.replace("postId",e.postId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.post=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getAuthorProfile:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(e.getUserProfileUrl.replace("userId",e.post.AuthorId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.author=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getWhoLiked:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v.a.get(e.getLikesUrl.replace("postId",e.postId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.likes=t.data.length})).catch((function(e){console.log(e.response)}));case 1:case"end":return t.stop()}}),t)})))()},haveILiked:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v.a.get(e.checkLikedUrl.replace("postId",e.postId).replace("userId",e.userId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.iLiked=t.data})).catch((function(e){console.log(e.response)}));case 1:case"end":return t.stop()}}),t)})))()},likePost:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.stopPropagation(),r.next=3,v.a.post(t.likePostUrl.replace("postId",t.postId).replace("userId",t.userId),null,{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)}));case 3:case"end":return r.stop()}}),r)})))()},unlikePost:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.stopPropagation(),r.next=3,v.a.post(t.unlikePostUrl.replace("postId",t.postId).replace("userId",t.userId),null,{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)}));case 3:case"end":return r.stop()}}),r)})))()},postReacted:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(e),t.postId===e.postId){r.next=3;break}return r.abrupt("return");case 3:e.like?(t.likes+=1,t.userId===e.userId&&(t.iLiked=!0)):(t.likes-=1,t.userId===e.userId&&(t.iLiked=!1));case 4:case"end":return r.stop()}}),r)})))()},getCommentCount:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v.a.get(e.getCommentCountUrl.replace("postId",e.postId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.comments=t.data})).catch((function(e){console.log(e.response)}));case 1:case"end":return t.stop()}}),t)})))()},postCardOnClick:function(){this.$route.path!=="/post/".concat(this.postId)&&this.$router.push({name:"post",params:{postId:this.postId,userId:this.userId,jwtToken:this.jwtToken}})},calcTimeTillNow:function(e){e=Date.now()-Date.parse(e);var t=Math.floor(e/31556952e3);if(t>0)return t+" years ago";var r=Math.floor(e/2629746e3);if(r>0)return r+" months ago";var n=Math.floor(e/6048e5);if(n>0)return n+" weeks ago";var o=Math.floor(e/864e5);if(o>0)return o+" days ago";var a=Math.floor(e/36e5);if(a>0)return a+" hours ago";var s=Math.floor(e/6e4);if(s>0)return s+" minutes ago";var i=Math.floor(e/1e3);return i+" seconds ago"},toReadableTime:function(e){return e=new Date(e),(e.getDate()<10?"0"+e.getDate():e.getDate())+"/"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/"+e.getFullYear()+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())}},watch:{post:{immediate:!0,deep:!0,handler:function(){}}}},J=H,q=(r("8420"),Object(c["a"])(J,z,N,!1,null,"cbf686fa",null)),W=q.exports,G={name:"Feed",components:{PostForm:B,PostCard:W},props:["userId","jwtToken"],data:function(){return{getFeedUrl:"https://localhost:6868/Users/userId/feed",postIds:[]}},mounted:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Into Feed..."),console.log(e.userId),!e.userId){t.next=6;break}return console.log("Found userId: ",e.userId),t.next=6,e.getFeed();case 6:case"end":return t.stop()}}),t)})))()},methods:{getFeed:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(e.getFeedUrl.replace("userId",e.userId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.postIds=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()}}},V=G,Y=Object(c["a"])(V,S,L,!1,null,"e5326c62",null),K=Y.exports,Q={name:"Home",components:{Feed:K},data:function(){return{getUserUrl:"https://localhost:6868/Users/",getUserProfileUrl:"https://localhost:6868/Users/userId/profile",jwtToken:"",userId:""}},props:{},created:function(){this.jwtToken=this.$route.params.authToken,void 0===this.jwtToken&&(this.jwtToken=this.$cookies.get("sn-auth-token"),null===this.jwtToken&&(console.log(this.jwtToken),this.$router.push("login")))},mounted:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUser();case 2:return t.next=4,e.getUserProfile();case 4:case"end":return t.stop()}}),t)})))()},methods:{logout:function(){this.jwtToken=this.$cookies.get("sn-auth-token"),null!==this.jwtToken&&this.$cookies.remove("sn-auth-token"),this.$nextTick((function(){this.$router.push("login")}))},getUser:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userId=e.$cookies.get("sn-user-id"),null===e.userId){t.next=4;break}return t.next=4,v.a.get(e.getUserUrl+e.userId,{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.user=t.data})).catch((function(e){console.log(e)}));case 4:case"end":return t.stop()}}),t)})))()},getUserProfile:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e,t.next=3,v.a.get(e.getUserProfileUrl.replace("userId",e.userId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){t.data.Timestamp||e.$router.push({name:"updateprofile",params:{userProfile:t.data,userId:r.userId,jwtToken:r.jwtToken}})})).catch((function(e){console.log(e.response)}));case 3:case"end":return t.stop()}}),t)})))()}},watch:{}},X=Q,Z=Object(c["a"])(X,O,$,!1,null,"1097ac48",null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Update profile")]),e.show?r("b-form",{on:{submit:e.onSubmit}},[r("b-form-group",[r("b-form-input",{attrs:{id:"input-name",placeholder:"Name",required:""},model:{value:e.form.Name,callback:function(t){e.$set(e.form,"Name",t)},expression:"form.Name"}})],1),r("b-form-group",[r("b-form-datepicker",{staticClass:"mb-2",attrs:{id:"input-dob"},model:{value:e.form.DateOfBirth,callback:function(t){e.$set(e.form,"DateOfBirth",t)},expression:"form.DateOfBirth"}})],1),r("b-form-group",[r("b-form-textarea",{attrs:{id:"textarea",placeholder:"About yourself...",rows:"3","max-rows":"6"},model:{value:e.form.SelfIntroduction,callback:function(t){e.$set(e.form,"SelfIntroduction",t)},expression:"form.SelfIntroduction"}})],1),r("b-form-group",[r("b-form-radio-group",{staticClass:"mb-3",attrs:{options:e.options,"value-field":"value","text-field":"name"},model:{value:e.form.Gender,callback:function(t){e.$set(e.form,"Gender",t)},expression:"form.Gender"}})],1),r("b-form-group",[r("b-form-input",{attrs:{id:"input-location",placeholder:"Address"},model:{value:e.form.CurrentLocation,callback:function(t){e.$set(e.form,"CurrentLocation",t)},expression:"form.CurrentLocation"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1):e._e(),r("b-card",{staticClass:"mt-3",attrs:{header:"Form Data Result"}},[r("pre",{staticClass:"m-0"},[e._v(e._s(e.form))])])],1)},re=[],ne=(r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),{data:function(){return{profileUrl:"https://localhost:6868/Users/userId/profile",show:!0,form:{},options:[{value:0,name:"Male"},{value:1,name:"Female"},{value:null,name:"Prefer not to share"}],avatarUrl:""}},created:function(){this.originalform=this.$route.params.userProfile,this.form=this.$route.params.userProfile},methods:{onSubmit:function(e){var t=this;e.preventDefault(),this.form.Timestamp=new Date,v.a.patch(this.profileUrl.replace("userId",this.$route.params.userId),JSON.parse(JSON.stringify(this.form)),{headers:{Authorization:"Bearer ".concat(this.$route.params.jwtToken)}}).then((function(e){console.log(e),t.$router.push({name:"home",params:{jwtToken:t.$route.params.jwtToken,userId:t.$route.params.userId}})})).catch((function(e){console.log(e.response)}))},onFileChange:function(e){var t=e.target.files[0];this.avatarUrl=URL.createObjectURL(t)}}}),oe=ne,ae=(r("60d4"),Object(c["a"])(oe,te,re,!1,null,"4b0dd28b",null)),se=ae.exports,ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Post")]),r("PostCard",{attrs:{userId:e.userId,jwtToken:e.jwtToken,postId:e.postId}}),r("b-container",{attrs:{fluid:"",id:"comments"}},[r("h2",[e._v("Comments")]),r("CommentForm",{attrs:{userId:e.userId,jwtToken:e.jwtToken,postId:e.postId}}),e._l(e.commentIds,(function(t){return r("CommentCard",{key:t,attrs:{userId:e.userId,jwtToken:e.jwtToken,commentId:t}})}))],2)],1)},ce=[],ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-card",[r("b-media",{scopedSlots:e._u([{key:"aside",fn:function(){return[r("b-img",{attrs:{blank:"","blank-color":"#ccc",width:"64",alt:"placeholder"}})]},proxy:!0}])},[r("b-form",{ref:"form",on:{submit:e.onSubmit}},[r("b-form-group",[r("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:e.form.Text,callback:function(t){e.$set(e.form,"Text",t)},expression:"form.Text"}})],1),r("b-form-group",[r("b-form-file",{attrs:{placeholder:"Add an image..."},model:{value:e.media,callback:function(t){e.media=t},expression:"media"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")])],1)],1)],1)},le=[],me={name:"CommentForm",props:["postId","userId","jwtToken"],data:function(){return{commentUrl:"https://localhost:6868/Comments/",form:{MediaPaths:[]},media:null}},methods:{onSubmit:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.preventDefault(),t.form.AuthorId=t.userId,t.form.PostId=t.postId,r.next=5,v.a.post(t.commentUrl,JSON.parse(JSON.stringify(t.form)),{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){console.log(e),t.$refs.form.reset()})).catch((function(e){console.log(e.response)}));case 5:case"end":return r.stop()}}),r)})))()}},watch:{media:function(){var e=this;null!==this.media&&(console.log(this.media),this.form.MediaPaths.push(this.media),this.$nextTick((function(){e.media=null})))}}},de=me,he=Object(c["a"])(de,ue,le,!1,null,"5d64a542",null),fe=he.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.author?r("b-card",[r("b-media",{scopedSlots:e._u([{key:"aside",fn:function(){return[r("b-img",{attrs:{blank:"","blank-color":"#ccc",width:"64",alt:"placeholder"}})]},proxy:!0}],null,!1,3721305002)},[r("div",{staticClass:"d-inline-flex author-date"},[r("b",{staticClass:"mt-0 author"},[r("a",{attrs:{href:e.userProfileUrl},on:{click:function(t){e.$(this).stopPropagation()}}},[e._v(e._s(e.author.Name))])]),r("div",[e._v("・")]),r("div",{staticClass:"date",attrs:{title:e.toReadableTime(e.comment.Timestamp)}},[e._v(e._s(e.calcTimeTillNow(e.comment.Timestamp)))])]),r("p",{staticClass:"mb-0 text"},[e._v(" "+e._s(e.comment.Text)+" ")])]),r("b-button-group",{staticClass:"d-flex like-cmt-share"},[r("div",{staticClass:"cmt"},[r("b-button",{attrs:{variant:"outline"}},[r("b-icon",{attrs:{icon:"chat"}})],1),r("div",{staticClass:"count"},[e._v(e._s(e.comments))])],1),r("div",{staticClass:"like"},[e.iLiked?r("b-button",{attrs:{variant:"outline"},on:{click:e.unlikeComment}},[r("b-icon",{attrs:{icon:"heart-fill",variant:"danger"}})],1):r("b-button",{attrs:{variant:"outline"},on:{click:e.likeComment}},[r("b-icon",{attrs:{icon:"heart"}})],1),r("div",{staticClass:"count",class:{liked:e.iLiked}},[e._v(e._s(e.likes))])],1)])],1):e._e()},ge=[],be={name:"CommentCard",props:["commentId","userId","jwtToken"],data:function(){return{getCommentUrl:"https://localhost:6868/Comments/commentId",getUserProfileUrl:"https://localhost:6868/Users/userId/profile",userProfileUrl:"http://localhost:8080/user/".concat(this.userId,"/profile"),comment:{},author:null,getLikesUrl:"https://localhost:6868/Comments/commentId/likes",checkLikedUrl:"https://localhost:6868/Comments/commentId/likes/userId",likeCommentUrl:"https://localhost:6868/Comments/commentId/likes/userId/like",unlikeCommentUrl:"https://localhost:6868/Comments/commentId/likes/userId/unlike",iLiked:!1,whoLiked:[],likes:0,getChildCountUrl:"https://localhost:6868/Comments/commentId/comments/count",comments:0,shares:0}},created:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$commentHub.$on("comment-react",e.commentReacted);case 2:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getComment();case 2:return t.next=4,e.getAuthorProfile();case 4:return t.next=6,e.haveILiked();case 6:return t.next=8,e.getWhoLiked();case 8:return t.next=10,e.getChildCount();case 10:case"end":return t.stop()}}),t)})))()},methods:{getComment:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(e.getCommentUrl.replace("commentId",e.commentId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.comment=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getAuthorProfile:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v.a.get(e.getUserProfileUrl.replace("userId",e.comment.AuthorId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.author=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getWhoLiked:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v.a.get(e.getLikesUrl.replace("commentId",e.commentId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.likes=t.data.length})).catch((function(e){console.log(e.response)}));case 1:case"end":return t.stop()}}),t)})))()},haveILiked:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v.a.get(e.checkLikedUrl.replace("commentId",e.commentId).replace("userId",e.userId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.iLiked=t.data})).catch((function(e){console.log(e.response)}));case 1:case"end":return t.stop()}}),t)})))()},likeComment:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("Like..."),e.stopPropagation(),r.next=4,v.a.post(t.likeCommentUrl.replace("commentId",t.commentId).replace("userId",t.userId),null,{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)}));case 4:case"end":return r.stop()}}),r)})))()},unlikeComment:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.stopPropagation(),r.next=3,v.a.post(t.unlikeCommentUrl.replace("commentId",t.commentId).replace("userId",t.userId),null,{headers:{Authorization:"Bearer ".concat(t.jwtToken)}}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)}));case 3:case"end":return r.stop()}}),r)})))()},commentReacted:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(console.log(e),t.commentId===e.commentId){r.next=3;break}return r.abrupt("return");case 3:e.like?(t.likes+=1,t.userId===e.userId&&(t.iLiked=!0)):(t.likes-=1,t.userId===e.userId&&(t.iLiked=!1));case 4:case"end":return r.stop()}}),r)})))()},getChildCount:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v.a.get(e.getChildCountUrl.replace("commentId",e.commentId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.comments=t.data})).catch((function(e){console.log(e.response)}));case 1:case"end":return t.stop()}}),t)})))()},calcTimeTillNow:function(e){e=Date.now()-Date.parse(e);var t=Math.floor(e/31556952e3);if(t>0)return t+" years ago";var r=Math.floor(e/2629746e3);if(r>0)return r+" months ago";var n=Math.floor(e/6048e5);if(n>0)return n+" weeks ago";var o=Math.floor(e/864e5);if(o>0)return o+" days ago";var a=Math.floor(e/36e5);if(a>0)return a+" hours ago";var s=Math.floor(e/6e4);if(s>0)return s+" minutes ago";var i=Math.floor(e/1e3);return i+" seconds ago"},toReadableTime:function(e){return e=new Date(e),(e.getDate()<10?"0"+e.getDate():e.getDate())+"/"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"/"+e.getFullYear()+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())}},watch:{comment:{immediate:!0,deep:!0,handler:function(){}}}},ke=be,ve=(r("2f56"),Object(c["a"])(ke,pe,ge,!1,null,"4b9c35a9",null)),we=ve.exports,Ie={name:"PostLayout",components:{PostCard:W,CommentForm:fe,CommentCard:we},data:function(){return{userId:"",jwtToken:"",postId:"",getCommentsForPostUrl:"https://localhost:6868/Posts/postId/comments",commentIds:[]}},created:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.userId=e.$route.params.userId,void 0===e.userId&&(e.userId=e.$cookies.get("sn-user-id")),e.jwtToken=e.$route.params.jwtToken,void 0===e.jwtToken&&(e.jwtToken=e.$cookies.get("sn-auth-token")),e.postId=e.$route.params.postId,t.next=7,e.$postHub.$on("post-commented-on",e.postCommentedOn);case 7:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$postHub.postClosed(e.postId);case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$postHub.postOpened(e.postId);case 2:return t.next=4,e.getComments();case 4:case"end":return t.stop()}}),t)})))()},methods:{getComments:function(){var e=this;return Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:v.a.get(e.getCommentsForPostUrl.replace("postId",e.postId),{headers:{Authorization:"Bearer ".concat(e.jwtToken)}}).then((function(t){e.commentIds=t.data,console.log(e.commentIds)})).catch((function(e){console.log(e.response)}));case 1:case"end":return t.stop()}}),t)})))()},postCommentedOn:function(e){var t=this;return Object(y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log(e),t.commentIds.unshift(e.id);case 2:case"end":return r.stop()}}),r)})))()}}},xe=Ie,je=Object(c["a"])(xe,ie,ce,!1,null,"d48fafbc",null),Ce=je.exports;n["default"].use(p["a"]);var Te=[{path:"/login",name:"login",component:j},{path:"/register",name:"register",component:U},{path:"/home",name:"home",component:ee},{path:"/update-profile",name:"updateprofile",component:se},{path:"/post/:postId",name:"post",component:Ce}],Re=new p["a"]({mode:"history",routes:Te}),Pe=Re,_e=r("2b27"),Ue=r.n(_e),Oe=r("5f5b"),$e=r("b1e0");r("f9e3"),r("2dd8");n["default"].config.productionTip=!0,n["default"].use(h),n["default"].use(f),n["default"].use(p["a"]),n["default"].use(Ue.a),n["default"].use(Oe["a"]),n["default"].use($e["a"]),new n["default"]({router:Pe,render:function(e){return e(l)}}).$mount("#app")},"60d4":function(e,t,r){"use strict";r("33c4")},"6ef4":function(e,t,r){},8420:function(e,t,r){"use strict";r("afab")},"85ec":function(e,t,r){},afab:function(e,t,r){}});
//# sourceMappingURL=app.02c170f2.js.map